RozumÃ­m â€” chceÅ¡ zjistit, jestli nÄ›jakÃ¡ hodnota (napÅ™. ÄÃ­slo v promÄ›nnÃ© nebo textovÃ½ vstup) je zapsanÃ¡ v Å¡estnÃ¡ctkovÃ© (hexadecimÃ¡lnÃ­) nebo desÃ­tkovÃ© soustavÄ›.

ZÃ¡leÅ¾Ã­, v Äem to Å™eÅ¡Ã­Å¡ â€” ukÃ¡Å¾u to na JavaScriptu (protoÅ¾e jsi posÃ­lal webovÃ½ kÃ³d):

ğŸ”¹ 1ï¸âƒ£ Detekce podle zÃ¡pisu (string)

NejjednoduÅ¡Å¡Ã­ metoda â€” Å¡estnÃ¡ctkovÃ¡ ÄÃ­sla obvykle zaÄÃ­najÃ­ 0x nebo 0X.

function detectBase(value) {
  if (typeof value !== 'string') value = String(value);

  if (/^0x[0-9a-f]+$/i.test(value)) {
    return 16; // hexadecimÃ¡lnÃ­
  } else if (/^\d+$/.test(value)) {
    return 10; // desÃ­tkovÃ¡
  } else {
    return null; // neplatnÃ½ nebo nejednoznaÄnÃ½ zÃ¡pis
  }
}

console.log(detectBase("0x1A")); // 16
console.log(detectBase("123"));  // 10
console.log(detectBase("1F"));   // null â€“ bez 0x nenÃ­ jistÃ©

ğŸ”¹ 2ï¸âƒ£ Pokud ÄÃ­slo uÅ¾ je typu number

JavaScript ÄÃ­sla si nepamatujÃ­, z jakÃ© soustavy byla pÅ™evedena â€”
takÅ¾e pokud uÅ¾ mÃ¡Å¡ let n = 0x1A;, po vypsÃ¡nÃ­:

console.log(n); // 26


...nenÃ­ moÅ¾nÃ© zpÄ›tnÄ› zjistit, Å¾e pÅ¯vodnÄ› bylo hexadecimÃ¡lnÃ­.

ğŸ”¹ 3ï¸âƒ£ Pokud pÅ™ijÃ­mÃ¡Å¡ textovÃ½ vstup (napÅ™. z formulÃ¡Å™e)

MÅ¯Å¾eÅ¡ se rozhodnout podle regulÃ¡rnÃ­ho vÃ½razu nebo podle pÅ™Ã­tomnosti znakÅ¯ Aâ€“F:

function guessBase(value) {
  if (typeof value !== 'string') return 10;
  if (/^0x/i.test(value)) return 16;
  if (/[a-f]/i.test(value)) return 16; // obsahuje hex pÃ­smena
  return 10;
}

console.log(guessBase("0xFF"));  // 16
console.log(guessBase("1A"));    // 16
console.log(guessBase("123"));   // 10

ğŸ”¹ 4ï¸âƒ£ PÅ™evod podle zjiÅ¡tÄ›nÃ© soustavy

Jakmile zjistÃ­Å¡ zÃ¡klad, mÅ¯Å¾eÅ¡ ÄÃ­slo pÅ™epoÄÃ­tat:

let input = "0xFF";
let base = guessBase(input);
let num = parseInt(input, base);
console.log(num); // 255


ChceÅ¡, abych ti to ukÃ¡zal i v jinÃ©m jazyce (napÅ™. Python, C nebo Arduino)?



VÃ½bornÃ½ pÅ™Ã­klad â€” "303a" je pÅ™esnÄ› ten hraniÄnÃ­ pÅ™Ã­pad, kde nenÃ­ na prvnÃ­ pohled jasnÃ©, zda jde o ÄÃ­slo v desÃ­tkovÃ© nebo Å¡estnÃ¡ctkovÃ© soustavÄ›.
PodÃ­vejme se na to podrobnÄ›:

ğŸ”¹ 1ï¸âƒ£ Co Å™Ã­kÃ¡ zÃ¡pis "303a"


Obsahuje znak a, coÅ¾ nenÃ­ platnÃ¡ ÄÃ­slice v desÃ­tkovÃ© soustavÄ›.


V Å¡estnÃ¡ctkovÃ© soustavÄ› (hexadecimÃ¡lnÃ­) jsou vÅ¡ak povolenÃ© ÄÃ­slice 0â€“9 a pÃ­smena Aâ€“F.
â¡ï¸ TakÅ¾e "303a" je platnÃ½ hexadecimÃ¡lnÃ­ zÃ¡pis.



ğŸ”¹ 2ï¸âƒ£ V JavaScriptu
MÅ¯Å¾eÅ¡ to zjistit jednoduchou funkcÃ­:
function detectBase(value) {
  value = String(value).trim();
  if (/^0x[0-9a-f]+$/i.test(value)) return 16;
  if (/^[0-9a-f]+$/i.test(value) && /[a-f]/i.test(value)) return 16;
  if (/^\d+$/.test(value)) return 10;
  return null;
}

console.log(detectBase("303a")); // 16
console.log(detectBase("1234")); // 10


ğŸ”¹ 3ï¸âƒ£ PÅ™evod na ÄÃ­slo
Pokud chceÅ¡ pÅ™evÃ©st "303a" na ÄÃ­slo, pouÅ¾ij parseInt s odpovÃ­dajÃ­cÃ­ soustavou:
parseInt("303a", 16); // â†’ 12346 v desÃ­tkovÃ© soustavÄ›


ğŸ”¹ 4ï¸âƒ£ ShrnutÃ­
ZÃ¡pisPlatnÃ© jako 10?PlatnÃ© jako 16?DesÃ­tkovÃ¡ hodnota303aâŒ (ne, obsahuje a)âœ…123461234âœ…âœ… (ale obÄ› znamenajÃ­ totÃ©Å¾)1234

ChceÅ¡, abych ti ukÃ¡zal, jak podobnÃ© rozpoznÃ¡nÃ­ udÄ›lat pÅ™Ã­mo v kÃ³du, kterÃ½ naÄÃ­tÃ¡ CSV (napÅ™. automaticky rozpoznat a pÅ™evÃ©st hodnoty typu hex â†’ dec)?



U â€303â€œ je to nejednoznaÄnÃ©: obsahuje jen ÄÃ­slice 0â€“9, takÅ¾e je to platnÃ© v desÃ­tkovÃ© i Å¡estnÃ¡ctkovÃ© soustavÄ›. Bez kontextu nebo prefixu se nedÃ¡ bezpeÄnÄ› poznat, co autor myslel.
RychlÃ¡ fakta:


303 v desÃ­tkovÃ© â†’ 303


303 v Å¡estnÃ¡ctkovÃ© â†’ 3Ã—16Â² + 0Ã—16 + 3 = 771 (v desÃ­tkovÃ©)


Jak to Å™eÅ¡it v praxi (JavaScript)


VÅ¾dy uveÄ radix pÅ™i parsovÃ¡nÃ­:


parseInt("303", 10); // 303
parseInt("303", 16); // 771



Dohodni si/poÅ¾aduj prefix pro hex (nebo suffix), aÅ¥ to nenÃ­ spornÃ©:




0x303 nebo 0X303 â†’ hex


pÅ™Ã­padnÄ› 303h â†’ hex (vlastnÃ­ konvence)




Detekce s vrÃ¡cenÃ­m â€ambiguousâ€œ (doporuÄeno):


function detectBase(s) {
  s = String(s).trim();
  if (/^0x[0-9a-f]+$/i.test(s)) return 16;      // 0x-prefixed â†’ hex
  if (/^[0-9]+$/.test(s)) return 'ambiguous';   // jen ÄÃ­slice â†’ 10 i 16
  if (/^[0-9a-f]+$/i.test(s)) return 16;        // obsahuje Aâ€“F â†’ hex
  return null;                                   // neplatnÃ½ zÃ¡pis
}

console.log(detectBase("303"));   // 'ambiguous'
console.log(detectBase("303a"));  // 16
console.log(detectBase("0x303")); // 16



Pokud chceÅ¡ â€uhodnoutâ€œ zÃ¡klad:




kdyÅ¾ je v Å™etÄ›zci Aâ€“F, ber jako hex,


jinak defaultuj na 10 (a loguj, Å¾e to bylo dvojznaÄnÃ©).


ChceÅ¡, abych to napasoval do tvÃ©ho CSV-procesoru (napÅ™. sloupec mÅ¯Å¾e bÃ½t 303 nebo 0x303 a vÃ½sledek mÃ¡ bÃ½t vÅ¾dy ÄÃ­slo v desÃ­tkovÃ©)?ChatGPT Å™ekl:U â€303â€œ to samo o sobÄ› nepoznÃ¡Å¡ â€“ je to platnÃ© ÄÃ­slo jak v desÃ­tkovÃ© (10), tak v Å¡estnÃ¡ctkovÃ© (16) soustavÄ›.
Bez prefixu/suffixu nebo kontextu je to dvojznaÄnÃ©.


Jako 10 â†’ 303


Jako 16 â†’ 3Â·16Â² + 0Â·16 + 3 = 771 (v desÃ­tkovÃ©)


DoporuÄenÃ½ postup (JS)


PÅ™i parsovÃ¡nÃ­ vÅ¾dy uveÄ radix:


parseInt("303", 10); // 303
parseInt("303", 16); // 771



ZaveÄ jasnÃ½ zÃ¡pis:


hex s prefixem 0x303 (nebo vlastnÃ­ konvencÃ­ 303h)


dec bez prefixu




Detekce s oznaÄenÃ­m â€ambiguousâ€œ:


function detectBase(s) {
  s = String(s).trim();
  if (/^0x[0-9a-f]+$/i.test(s)) return 16;      // 0x... â†’ hex
  if (/^[0-9]+$/.test(s)) return 'ambiguous';   // jen




  SkvÄ›lÃ© â€” ptÃ¡Å¡ se na port.getInfo(), coÅ¾ pochÃ¡zÃ­ z Web Serial API v JavaScriptu (pouÅ¾Ã­vanÃ©ho v prohlÃ­Å¾eÄÃ­ch jako Chrome nebo Edge).
PodÃ­vejme se, co vracÃ­ a v jakÃ© soustavÄ› jsou hodnoty.

ğŸ”¹ Co dÄ›lÃ¡ port.getInfo()
Pokud mÃ¡Å¡ pÅ™ipojenÃ© sÃ©riovÃ© zaÅ™Ã­zenÃ­ (napÅ™. Arduino),
volÃ¡nÃ­:
const info = port.getInfo();
console.log(info);

vrÃ¡tÃ­ objekt s metadaty o danÃ©m portu.
TypickÃ½ vÃ½stup:
{
  usbVendorId: 9025,
  usbProductId: 67
}


ğŸ”¹ JakÃ¡ je soustava?
Tyto hodnoty (usbVendorId, usbProductId) jsou ÄÃ­selnÃ©, takÅ¾e v JavaScriptu jde o bÄ›Å¾nÃ¡ desÃ­tkovÃ¡ ÄÃ­sla (Number).
Ale jsou to pÅ¯vodnÄ› identifikÃ¡tory USB zaÅ™Ã­zenÃ­, kterÃ© se tradiÄnÄ› zapisujÃ­ v Å¡estnÃ¡ctkovÃ© soustavÄ› â€” napÅ™.:


usbVendorId: 9025 â†’ 0x2341


usbProductId: 67 â†’ 0x0043



ğŸ”¹ Jak pÅ™evÃ©st na hex
Pokud chceÅ¡ hodnoty zobrazit jako v datasheetech (hexadecimÃ¡lnÄ›):
const info = await port.getInfo();
console.log("Vendor:", "0x" + info.usbVendorId.toString(16));
console.log("Product:", "0x" + info.usbProductId.toString(16));

â¡ï¸ VÃ½stup napÅ™.:
Vendor: 0x2341
Product: 0x43


ğŸ”¹ ShrnutÃ­
VlastnostTypPÅ™Ã­klad (dec)PÅ™Ã­klad (hex)PoznÃ¡mkausbVendorIdÄÃ­slo90250x2341identifikuje vÃ½robce (napÅ™. Arduino)usbProductIdÄÃ­slo670x0043konkrÃ©tnÃ­ zaÅ™Ã­zenÃ­/model

ChceÅ¡, abych ti ukÃ¡zal, jak automaticky pÅ™evÃ©st tyto ID do hex formÃ¡tu a tÅ™eba je i rozpoznat podle databÃ¡ze vÃ½robcÅ¯ USB zaÅ™Ã­zenÃ­ (napÅ™. â€Arduino SAâ€œ)?